#include <Adafruit_NeoPixel.h>
#include <Wire.h>
#include <U8g2lib.h>

#define Num_Module           21 //numéro d'adresse esclave de ce module (ne pas mettre 2 identiques)

#define PIXEL_PIN_Led_RGB         2
#define PIXEL_COUNT_Led_RGB       1
Adafruit_NeoPixel stripRGB(PIXEL_COUNT_Led_RGB, PIXEL_PIN_Led_RGB, NEO_GRB + NEO_KHZ800);


#define BUTTON1_PIN          A0
#define BUTTON2_PIN          A1
#define BUTTON3_PIN          A2
#define BUTTON4_PIN          A3

U8G2_ST7920_128X64_1_SW_SPI u8g2(U8G2_R0, /* clock=*/ 13, /* data=*/ 11, /* CS=*/ 10, /* reset=*/ 8);
/* PIN CONNECTIONS: 
 * 
 * BLK        GND
 * BLA        3.3V
 * PSB        GND
 * E (SCK)    13
 * RW (MOSI)  11
 * RS (CS)    10
 * 
 * VCC        5V
 * GND        GND
 * 
*/


int Recep[6];
int Numero_de_serie = 0;
int Nb_Batteries = 2;
int Port = 0;
int Nb_Erreur = 0;
int Indicateur = 0;
int Strike = 0;
int Module_fini = 0;
int Val_temps = 0;
int Val_temps_1 = 0;
int Val_temps_4 = 0;
int Val_temps_5 = 0;
int Demmarage = 0;

byte ligne = 0;
byte colonne[7] = {0, 1, 2, 3, 4, 5, 6};
byte ordre_symbole[4];
byte ordre_BP[4];
byte ordre = 0;
byte kval = 0;
byte kval_old = 0;
byte bouton_appuye = 0;

const unsigned char logo_copyright [] PROGMEM = { // '101-Copyright', 32x32px
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0xc0,0x07,0x00,0x00,0x30,0x18,0x00,0x00,0x08,0x20,0x00,
   0x00,0x04,0x40,0x00,0x00,0x82,0x87,0x00,0x00,0xe1,0x0c,0x01,
   0x00,0x31,0x08,0x01,0x80,0x38,0x08,0x02,0x80,0x18,0x00,0x02,
   0x80,0x18,0x00,0x02,0x80,0x18,0x00,0x02,0x80,0x18,0x00,0x02,
   0x80,0x38,0x08,0x02,0x00,0x31,0x08,0x01,0x00,0xe1,0x0c,0x01,
   0x00,0xc2,0x8f,0x00,0x00,0x04,0x40,0x00,0x00,0x08,0x20,0x00,
   0x00,0x30,0x18,0x00,0x00,0xc0,0x07,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 };
const unsigned char logo_etoile_noir [] PROGMEM = { // '102-EtoileNoir', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x01, 0x00,
   0x00, 0x80, 0x01, 0x00, 0x00, 0x80, 0x01, 0x00, 0x00, 0xc0, 0x03, 0x00,
   0x00, 0xc0, 0x03, 0x00, 0x00, 0xe0, 0x07, 0x00, 0x00, 0xff, 0xff, 0x00,
   0x00, 0xfe, 0x7f, 0x00, 0x00, 0xfc, 0x3f, 0x00, 0x00, 0xf8, 0x1f, 0x00,
   0x00, 0xf0, 0x0f, 0x00, 0x00, 0xf0, 0x0f, 0x00, 0x00, 0xf8, 0x1f, 0x00,
   0x00, 0x78, 0x1e, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x0c, 0x30, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_etoile_blanche [] PROGMEM = { // '103-EtoileBlanche', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00,
   0x00, 0x80, 0x03, 0x00, 0x00, 0x80, 0x02, 0x00, 0x00, 0x40, 0x04, 0x00,
   0x00, 0x40, 0x04, 0x00, 0x80, 0x7f, 0xfc, 0x03, 0x00, 0x03, 0x80, 0x01,
   0x00, 0x04, 0x40, 0x00, 0x00, 0x08, 0x20, 0x00, 0x00, 0x10, 0x10, 0x00,
   0x00, 0x10, 0x10, 0x00, 0x00, 0x10, 0x11, 0x00, 0x00, 0x90, 0x12, 0x00,
   0x00, 0x48, 0x24, 0x00, 0x00, 0x38, 0x38, 0x00, 0x00, 0x0c, 0x60, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_smyley [] PROGMEM = { // '104-Smiley', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x03, 0x00,
   0x00, 0x20, 0x01, 0x03, 0xc0, 0x01, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x03,
   0xc0, 0x00, 0x80, 0x03, 0xc0, 0x00, 0x80, 0x01, 0xc0, 0x01, 0xe0, 0x01,
   0x80, 0x8f, 0xff, 0x00, 0x00, 0xff, 0x3f, 0x00, 0x00, 0xf8, 0x03, 0x00,
   0x00, 0x60, 0x03, 0x00, 0x00, 0x20, 0x02, 0x00, 0x00, 0xe0, 0x03, 0x00,
   0x00, 0xc0, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_doubleK [] PROGMEM = { // '105-DoubleK', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc3, 0x8f, 0x07,
   0xc0, 0x87, 0xc3, 0x07, 0x00, 0x8c, 0x43, 0x00, 0x00, 0x88, 0x63, 0x00,
   0x00, 0x88, 0x23, 0x00, 0x00, 0x98, 0x23, 0x00, 0x00, 0x90, 0x33, 0x00,
   0x00, 0xb0, 0x1b, 0x00, 0x00, 0xe0, 0x1f, 0x00, 0x00, 0xb8, 0x3b, 0x00,
   0x00, 0x98, 0x73, 0x00, 0x00, 0x9c, 0x63, 0x00, 0x00, 0x8e, 0xe3, 0x00,
   0x00, 0x86, 0xc3, 0x01, 0x00, 0x87, 0xc3, 0x01, 0xc0, 0xc3, 0x87, 0x07,
   0xc0, 0xc3, 0x0f, 0x07, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x04,
   0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x04,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_omega [] PROGMEM = { // '106-Omega', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x03, 0x00, 0x00, 0x38, 0x1c, 0x00,
   0x00, 0x0e, 0x38, 0x00, 0x00, 0x07, 0x70, 0x00, 0x00, 0x03, 0xe0, 0x00,
   0x80, 0x03, 0xe0, 0x00, 0x80, 0x03, 0xc0, 0x00, 0x80, 0x03, 0xc0, 0x00,
   0x80, 0x03, 0xc0, 0x00, 0x80, 0x03, 0xc0, 0x00, 0x00, 0x03, 0xe0, 0x00,
   0x00, 0x07, 0x70, 0x00, 0x00, 0x0e, 0x38, 0x00, 0x00, 0x38, 0x1c, 0x00,
   0x00, 0x20, 0x02, 0x00, 0x80, 0x21, 0x82, 0x00, 0x80, 0x3f, 0xfe, 0x00,
   0x80, 0x3f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_squidgame [] PROGMEM = { // '107-SquidGame', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xe0, 0xf8, 0xff, 0x07, 0xe0, 0xf0, 0xff, 0x03, 0xe0, 0x70, 0xc0, 0x01,
   0xe0, 0xe0, 0xc0, 0x01, 0xe0, 0xc0, 0xe0, 0x00, 0xe0, 0xc0, 0xe1, 0x00,
   0xe0, 0x80, 0x73, 0x00, 0xe0, 0xff, 0x73, 0x00, 0xe0, 0xff, 0x3f, 0x00,
   0xe0, 0xff, 0x3f, 0x00, 0xe0, 0xc0, 0xff, 0x00, 0xe0, 0xe0, 0xcc, 0x01,
   0xe0, 0x70, 0x8c, 0x03, 0xe0, 0x38, 0x0c, 0x03, 0xe0, 0x38, 0x0c, 0x07,
   0xe0, 0x18, 0x0c, 0x07, 0xe0, 0x18, 0x0c, 0x06, 0xe0, 0x1c, 0x0c, 0x06,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_cul [] PROGMEM = { // '108-Cul', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x07, 0x00, 0x00, 0xe0, 0x0f, 0x00, 0x00, 0x70, 0x18, 0x00,
   0x00, 0x10, 0x10, 0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0x80, 0x03, 0x00,
   0x00, 0x00, 0x03, 0x00, 0x40, 0x80, 0x01, 0x00, 0xe0, 0x80, 0x00, 0x07,
   0x60, 0x00, 0x00, 0x0e, 0x70, 0x00, 0x00, 0x0c, 0x70, 0x00, 0x00, 0x1c,
   0x30, 0x00, 0x00, 0x1c, 0x38, 0x00, 0x00, 0x18, 0x38, 0x00, 0x00, 0x18,
   0x38, 0x00, 0x00, 0x18, 0x38, 0x00, 0x00, 0x38, 0x38, 0x00, 0x00, 0x38,
   0x38, 0xc0, 0x07, 0x38, 0x38, 0xf0, 0x0f, 0x18, 0x78, 0xfc, 0x3f, 0x1e,
   0xf0, 0x3f, 0xf8, 0x1f, 0xe0, 0x0f, 0xe0, 0x0f, 0xc0, 0x03, 0xc0, 0x07,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_Hvirgul [] PROGMEM = { // '109-Hvirgule', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x40, 0x00, 0x00, 0x7c, 0x70, 0x00,
   0x00, 0x64, 0x78, 0x00, 0x00, 0xe0, 0x38, 0x00, 0x00, 0xc0, 0x1c, 0x00,
   0x00, 0xc0, 0x0e, 0x00, 0x00, 0xe0, 0x07, 0x00, 0x00, 0xe0, 0x07, 0x00,
   0x00, 0xf0, 0x06, 0x00, 0x00, 0x78, 0x06, 0x00, 0x00, 0x38, 0x06, 0x00,
   0x00, 0x1c, 0x06, 0x00, 0x00, 0x1e, 0x7c, 0x00, 0x00, 0x06, 0x38, 0x00,
   0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x38, 0x00,
   0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_six [] PROGMEM = { // '110-Six', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xc0, 0xff, 0x00, 0x00, 0xf0, 0x7f, 0x00, 0x00, 0x38, 0x00, 0x00,
   0x00, 0x1c, 0x00, 0x00, 0x00, 0x8c, 0x07, 0x00, 0x00, 0xec, 0x1f, 0x00,
   0x00, 0x7e, 0x3c, 0x00, 0x00, 0x1e, 0x70, 0x00, 0x00, 0x0e, 0x70, 0x00,
   0x00, 0x0e, 0xe0, 0x00, 0x00, 0x0e, 0xe0, 0x00, 0x00, 0x0e, 0xe0, 0x00,
   0x00, 0x0e, 0xe0, 0x00, 0x00, 0x0e, 0xe0, 0x00, 0x00, 0x0c, 0x70, 0x00,
   0x00, 0x1c, 0x70, 0x00, 0x00, 0x78, 0x3c, 0x00, 0x00, 0xf0, 0x1f, 0x00,
   0x00, 0x80, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_Nalenvers [] PROGMEM = { // '111-Nalenvers', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x1c, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00,
   0x00, 0x70, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x30, 0x60, 0x00,
   0x00, 0x30, 0x38, 0x00, 0x00, 0x30, 0x3e, 0x00, 0x00, 0xb8, 0x3f, 0x00,
   0x00, 0xf8, 0x19, 0x00, 0x00, 0x78, 0x18, 0x00, 0x00, 0x1c, 0x1c, 0x00,
   0x00, 0x04, 0x0c, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x0c, 0x00,
   0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x38, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_at [] PROGMEM = { // '112-AT', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x80, 0x01, 0x00, 0x00, 0xc0, 0x03, 0x00, 0x00, 0xc0, 0x07, 0x00,
   0x00, 0xe0, 0x07, 0x00, 0x00, 0x60, 0x0e, 0x00, 0x00, 0x70, 0x0e, 0x00,
   0x00, 0x30, 0x1c, 0x00, 0x00, 0x38, 0x1c, 0x00, 0x00, 0x18, 0x38, 0x00,
   0x00, 0x1c, 0x38, 0x00, 0x00, 0xfc, 0x7f, 0x00, 0x00, 0xfe, 0x7f, 0x00,
   0x00, 0x87, 0xe1, 0x00, 0x00, 0x87, 0xc1, 0x00, 0x80, 0x83, 0xc1, 0x01,
   0x80, 0x83, 0x81, 0x01, 0xc0, 0x81, 0x81, 0x03, 0xc0, 0x81, 0x01, 0x03,
   0xc0, 0x80, 0x01, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_adanse [] PROGMEM = { // '113-AdansE', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x70, 0x38, 0x00, 0x00, 0xfc, 0x7f, 0x00, 0x00, 0x86, 0xe3, 0x00,
   0x00, 0x86, 0xc1, 0x00, 0x00, 0x80, 0xc1, 0x00, 0x00, 0xe0, 0xff, 0x00,
   0x00, 0x9c, 0x01, 0x00, 0x00, 0x86, 0x01, 0x00, 0x00, 0x87, 0x01, 0x00,
   0x00, 0x83, 0x01, 0x00, 0x00, 0x87, 0x83, 0x00, 0x00, 0x7e, 0xff, 0x00,
   0x00, 0x1c, 0x3c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_troisfondu [] PROGMEM = { // '114-Troisfondu', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x01, 0x00,
   0x00, 0x8e, 0x07, 0x00, 0x00, 0x06, 0x06, 0x00, 0x00, 0x06, 0x0e, 0x00,
   0x00, 0x06, 0x0e, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x06, 0x00,
   0x00, 0x80, 0x03, 0x00, 0x00, 0xe0, 0x01, 0x00, 0x00, 0x00, 0x07, 0x00,
   0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x0c, 0x00,
   0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x1c, 0x00,
   0x00, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x60, 0x00,
   0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x40, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_e2points [] PROGMEM = { // '115-E2points', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x60, 0x0c, 0x00, 0x00, 0x60, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x0f, 0x00,
   0x00, 0x0c, 0x1c, 0x00, 0x00, 0x0c, 0x38, 0x00, 0x00, 0x0c, 0x70, 0x00,
   0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0xe0, 0x00,
   0x00, 0x00, 0xe0, 0x00, 0x00, 0xc0, 0xff, 0x00, 0x00, 0x00, 0xe0, 0x00,
   0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x0c, 0x70, 0x00,
   0x00, 0x0c, 0x30, 0x00, 0x00, 0x0c, 0x18, 0x00, 0x00, 0x1c, 0x0e, 0x00,
   0x00, 0xf8, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_Nchapeau [] PROGMEM = { // '116-Nchapeau', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x60, 0x0c, 0x00, 0x00, 0x60, 0x0c, 0x00, 0x00, 0x40, 0x0c, 0x00,
   0x00, 0x80, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x7e, 0xf8, 0x01, 0x00, 0x1c, 0x70, 0x00, 0x00, 0x1c, 0x70, 0x00,
   0x00, 0x1c, 0x78, 0x00, 0x00, 0x1c, 0x7c, 0x00, 0x00, 0x1c, 0x74, 0x00,
   0x00, 0x1c, 0x76, 0x00, 0x00, 0x1c, 0x73, 0x00, 0x00, 0x9c, 0x71, 0x00,
   0x00, 0xdc, 0x70, 0x00, 0x00, 0x7c, 0x70, 0x00, 0x00, 0x7c, 0x70, 0x00,
   0x00, 0x3c, 0x70, 0x00, 0x00, 0x1c, 0x70, 0x00, 0x00, 0x1c, 0x70, 0x00,
   0x00, 0x7e, 0xf8, 0x01, 0x00, 0x40, 0xc0, 0x01, 0x00, 0x00, 0x80, 0x00,
   0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x20, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_3serpent [] PROGMEM = { // '117-3Serprent', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x1c, 0x00,
   0x00, 0x60, 0x04, 0x00, 0x00, 0x40, 0x06, 0x00, 0x00, 0xc0, 0x02, 0x00,
   0x00, 0xc0, 0x03, 0x00, 0x00, 0xf0, 0x0f, 0x00, 0x00, 0xf0, 0x1f, 0x00,
   0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x18, 0x00,
   0x00, 0x00, 0x0f, 0x00, 0x00, 0xc0, 0x07, 0x00, 0x00, 0x00, 0x1e, 0x00,
   0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00, 0x38, 0x00,
   0x00, 0x00, 0x1c, 0x00, 0x00, 0xf0, 0x0f, 0x00, 0x00, 0xf8, 0x07, 0x00,
   0x00, 0x18, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x18, 0x06, 0x00,
   0x00, 0xf0, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_pointdinterogation [] PROGMEM = { // '118-Pointdinterogation', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x06, 0x00,
   0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x06, 0x00,
   0x00, 0x80, 0x03, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00,
   0x00, 0x60, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x70, 0x10, 0x00,
   0x00, 0x60, 0x38, 0x00, 0x00, 0xe0, 0x18, 0x00, 0x00, 0x80, 0x1f, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_paragraphe [] PROGMEM = { // '119-Paragraph', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x3b, 0x00, 0x00, 0xf0, 0x13, 0x00,
   0x00, 0xf0, 0x13, 0x00, 0x00, 0xf0, 0x13, 0x00, 0x00, 0xf8, 0x13, 0x00,
   0x00, 0xf0, 0x13, 0x00, 0x00, 0xf0, 0x13, 0x00, 0x00, 0xf0, 0x13, 0x00,
   0x00, 0xc0, 0x13, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00,
   0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00,
   0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00,
   0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_Cdroit [] PROGMEM = { // '120-Cdroit', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xe0, 0x1f, 0x00, 0x00, 0xf0, 0x7f, 0x00, 0x00, 0x38, 0x60, 0x00,
   0x00, 0x1c, 0x40, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00,
   0x00, 0x06, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x07, 0x07, 0x00,
   0x00, 0x07, 0x06, 0x00, 0x00, 0x07, 0x06, 0x00, 0x00, 0x06, 0x00, 0x00,
   0x00, 0x06, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00,
   0x00, 0x3c, 0x60, 0x00, 0x00, 0xf8, 0x78, 0x00, 0x00, 0xe0, 0x3f, 0x00,
   0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_Cgauche [] PROGMEM = { // '121-Cgauche', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xfc, 0x03, 0x00, 0x00, 0xfe, 0x0f, 0x00, 0x00, 0x07, 0x1e, 0x00,
   0x00, 0x01, 0x38, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00, 0x70, 0x00,
   0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x70, 0x70, 0x00,
   0x00, 0x70, 0x70, 0x00, 0x00, 0x70, 0x70, 0x00, 0x00, 0x00, 0x70, 0x00,
   0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x38, 0x00,
   0x00, 0x03, 0x1c, 0x00, 0x00, 0x9f, 0x0f, 0x00, 0x00, 0xfe, 0x07, 0x00,
   0x00, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_fourche [] PROGMEM = { // '122-Fourche', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x07, 0x00,
   0x00, 0x83, 0x83, 0x01, 0x00, 0x83, 0x83, 0x01, 0x00, 0x83, 0x83, 0x01,
   0x00, 0x83, 0x81, 0x01, 0x00, 0x83, 0xc1, 0x01, 0x00, 0x83, 0xc1, 0x01,
   0x00, 0x87, 0xc1, 0x01, 0x00, 0x87, 0xc1, 0x00, 0x00, 0x86, 0xc1, 0x00,
   0x00, 0x8c, 0x61, 0x00, 0x00, 0xf0, 0x1f, 0x00, 0x00, 0x80, 0x01, 0x00,
   0x00, 0x80, 0x01, 0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0x80, 0x03, 0x00,
   0x00, 0xc0, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_infogramme [] PROGMEM = { // '123-Infogramme', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00,
   0x00, 0x38, 0x3c, 0x00, 0x00, 0x0c, 0x66, 0x00, 0x00, 0x0e, 0xe3, 0x00,
   0x00, 0x87, 0xc3, 0x00, 0x00, 0x87, 0xc3, 0x01, 0x00, 0x87, 0xc3, 0x01,
   0x00, 0x83, 0xc3, 0x01, 0x00, 0x83, 0xc3, 0x01, 0x00, 0x83, 0xc3, 0x01,
   0x00, 0x87, 0xc3, 0x01, 0x00, 0x87, 0xc3, 0x01, 0x00, 0x86, 0xe7, 0x00,
   0x00, 0x0e, 0xe7, 0x00, 0x00, 0x1c, 0x7e, 0x00, 0x00, 0x38, 0x3e, 0x03,
   0x00, 0xe0, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_croixlorraine [] PROGMEM = { // '124-CroixLorraine', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00,
   0x00, 0x60, 0x3c, 0x00, 0x00, 0xf0, 0x7c, 0x00, 0x00, 0xf0, 0x7f, 0x00,
   0x00, 0xf0, 0x3f, 0x00, 0x00, 0xc0, 0x1f, 0x00, 0x00, 0x80, 0x7f, 0x00,
   0x00, 0xc4, 0xff, 0x00, 0x00, 0xce, 0xff, 0x01, 0x00, 0xff, 0xe3, 0x00,
   0x00, 0xff, 0x41, 0x00, 0x00, 0xfc, 0x01, 0x00, 0x00, 0xf8, 0x07, 0x00,
   0x00, 0xf8, 0x0f, 0x00, 0x00, 0xfc, 0x0f, 0x00, 0x00, 0x7e, 0x0f, 0x00,
   0x00, 0x3e, 0x04, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_balon [] PROGMEM = { // '125-Balon', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x0f, 0x00,
   0x00, 0xf8, 0x3f, 0x00, 0x00, 0x1c, 0x78, 0x00, 0x00, 0x0e, 0x70, 0x00,
   0x00, 0x07, 0xe0, 0x00, 0x00, 0x07, 0xc0, 0x00, 0x00, 0x07, 0xc0, 0x01,
   0x00, 0x03, 0xc0, 0x01, 0x00, 0x03, 0xc0, 0x01, 0x00, 0x03, 0xc0, 0x01,
   0x00, 0x03, 0xc0, 0x01, 0x00, 0x07, 0xc0, 0x01, 0x00, 0x07, 0xc0, 0x00,
   0x00, 0x07, 0xe0, 0x00, 0x00, 0x0e, 0x70, 0x00, 0x00, 0x1c, 0x78, 0x00,
   0x00, 0xf8, 0x3f, 0x00, 0x00, 0xf0, 0x0f, 0x00, 0x00, 0x80, 0x03, 0x00,
   0x00, 0x80, 0x01, 0x00, 0x00, 0x80, 0x01, 0x00, 0x00, 0x80, 0x01, 0x00,
   0x00, 0x80, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_ytete [] PROGMEM = { // '126-Ytete', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x7c, 0x03, 0x00,
   0x00, 0xcc, 0x01, 0x00, 0x00, 0xcc, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00,
   0x00, 0xb0, 0x01, 0x00, 0x00, 0x90, 0x01, 0x00, 0x00, 0x80, 0x03, 0x00,
   0x00, 0xc0, 0x03, 0x00, 0x00, 0xc0, 0x02, 0x00, 0x00, 0xe0, 0x06, 0x00,
   0x00, 0x60, 0x04, 0x00, 0x00, 0x70, 0x0c, 0x00, 0x00, 0x30, 0x0c, 0x00,
   0x00, 0x38, 0x88, 0x01, 0x00, 0x18, 0x98, 0x01, 0x00, 0x0c, 0xf0, 0x01,
   0x00, 0x0c, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
const unsigned char logo_BT [] PROGMEM = { // '127-BT', 32x32px
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x03, 0x00,
   0x00, 0xf8, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0xff, 0x0f, 0x00,
   0x00, 0xf7, 0x0e, 0x00, 0x00, 0x73, 0x0c, 0x00, 0x00, 0x71, 0x0c, 0x00,
   0x00, 0xf0, 0x00, 0x00, 0x00, 0xf0, 0x3f, 0x00, 0x00, 0xf0, 0xff, 0x00,
   0x00, 0x70, 0xe0, 0x01, 0x00, 0x70, 0xe0, 0x01, 0x00, 0x70, 0xc0, 0x01,
   0x00, 0x70, 0xc0, 0x01, 0x00, 0x70, 0xc0, 0x01, 0x00, 0x70, 0xe0, 0x01,
   0x00, 0xf0, 0xf8, 0x00, 0x00, 0xfc, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };

const byte symbole[6][7] = {
{125, 112, 126, 111, 107, 109, 121},
{115, 125, 121, 123, 103, 109, 118},
{101, 108, 123, 105, 114, 126, 103},
{110, 119, 127, 107, 105, 118, 104},
{122, 104, 127, 120, 119, 117, 102},
{110, 115, 124, 113, 122, 116, 106}};

byte symbole_1 = 0;

void setup() {
  Wire.begin(Num_Module);                // join i2c bus with address ...
  Wire.onReceive(onReceive);
  Wire.onRequest(onRequest);
  stripRGB.begin();
  stripRGB.setPixelColor(0,   150,   150, 150);
  stripRGB.show();
  pinMode(BUTTON1_PIN, INPUT_PULLUP);
  pinMode(BUTTON2_PIN, INPUT_PULLUP);
  pinMode(BUTTON3_PIN, INPUT_PULLUP);
  pinMode(BUTTON4_PIN, INPUT_PULLUP);
  u8g2.begin();
  Serial.begin(9600);
  Serial.println("\n Module Symboles KTANE");
  Serial.println("En attente du démarrage");
}

void loop() {
  if (Demmarage == 0) {
    while (Demmarage == 0) {
      delay(250);
      Serial.println(Demmarage);
    }
    delay(1000);
    randomSeed(millis());
  initialisation();
  }
   if(Module_fini == 0){
      stripRGB.setPixelColor(0, 0, 0, 100);             //  Set pixel's color (in RAM)
      stripRGB.show();                                  //  Update strip to match
      u8g2.firstPage();
      do {
         dessine(symbole[ligne][colonne[0]],  0, 16);
         dessine(symbole[ligne][colonne[1]], 32, 16);
         dessine(symbole[ligne][colonne[2]], 64, 16);
         dessine(symbole[ligne][colonne[3]], 96, 16);
      } while ( u8g2.nextPage() );
      stripRGB.setPixelColor(0, 0, 0, 100);
      stripRGB.show();
      get_bouton();
   }
  if (Module_fini == 1) {
    delay(100);
    stripRGB.setPixelColor(0, 255, 0, 0);             //  Set pixel's color (in RAM)
    stripRGB.show(); 
  }
}

void initialisation() {
      for (int h = 0; h < 500; h++) { //mellange la premiere ligne
        int i = random(0, 7); 
        int j = random(0, 7);
        int swap = colonne[i];
        colonne[i] = colonne[j];
        colonne[j] = swap;}
  ligne = random(0, 6);
  ordre = 1;
  for (int j = 0; j < 7; j++) {
    for (int i = 0; i < 4; i++) {
      if (colonne[i] == j) {
        ordre_symbole[i] = ordre;
        ordre ++;}}}
  ordre = 1;
  for (int j = 1; j < 5; j++) {
    for (int i = 0; i < 4; i++) {
      if (ordre_symbole[i] == j) {
        ordre_BP[j-1] = i + 1;}}}
        
  Serial.print("la colonne choisie est : ");
  Serial.println(ligne + 1);
  Serial.print("les symboles sont : ");
  Serial.print(colonne[0] + 1);
  Serial.print("   ");
  Serial.print(colonne[1] + 1);
  Serial.print("   ");
  Serial.print(colonne[2] + 1);
  Serial.print("   ");
  Serial.println(colonne[3] + 1);
  Serial.println("");
  Serial.print(symbole[ligne][colonne[0]]); Serial.print("    ");
  Serial.print(symbole[ligne][colonne[1]]); Serial.print("    ");
  Serial.print(symbole[ligne][colonne[2]]); Serial.print("    ");
  Serial.print(symbole[ligne][colonne[3]]); Serial.println("");
  
  Serial.print("l'ordre des symboles est :  ");
  Serial.print(ordre_symbole[0]); Serial.print("    ");
  Serial.print(ordre_symbole[1]); Serial.print("    ");
  Serial.print(ordre_symbole[2]); Serial.print("    ");
  Serial.print(ordre_symbole[3]); Serial.println("");
  
  Serial.print("l'ordre a appuyer est :  ");
  Serial.print(ordre_BP[0]); Serial.print("    ");
  Serial.print(ordre_BP[1]); Serial.print("    ");
  Serial.print(ordre_BP[2]); Serial.print("    ");
  Serial.print(ordre_BP[3]); Serial.println("");

u8g2.firstPage();
 do {
  dessine(symbole[ligne][colonne[0]],  0, 16);
  dessine(symbole[ligne][colonne[1]], 32, 16);
  dessine(symbole[ligne][colonne[2]], 64, 16);
  dessine(symbole[ligne][colonne[3]], 96, 16);
  } while ( u8g2.nextPage() );
}

void dessine(byte val, int x, int y) {
  if (val == 101) u8g2.drawXBMP(x, y, 32, 32, logo_copyright);
  if (val == 102) u8g2.drawXBMP(x, y, 32, 32, logo_etoile_noir);
  if (val == 103) u8g2.drawXBMP(x, y, 32, 32, logo_etoile_blanche);
  if (val == 104) u8g2.drawXBMP(x, y, 32, 32, logo_smyley);
  if (val == 105) u8g2.drawXBMP(x, y, 32, 32, logo_doubleK);
  if (val == 106) u8g2.drawXBMP(x, y, 32, 32, logo_omega);
  if (val == 107) u8g2.drawXBMP(x, y, 32, 32, logo_squidgame);
  if (val == 108) u8g2.drawXBMP(x, y, 32, 32, logo_cul);
  if (val == 109) u8g2.drawXBMP(x, y, 32, 32, logo_Hvirgul);
  if (val == 110) u8g2.drawXBMP(x, y, 32, 32, logo_six);
  if (val == 111) u8g2.drawXBMP(x, y, 32, 32, logo_Nalenvers);
  if (val == 112) u8g2.drawXBMP(x, y, 32, 32, logo_at);
  if (val == 113) u8g2.drawXBMP(x, y, 32, 32, logo_adanse);
  if (val == 114) u8g2.drawXBMP(x, y, 32, 32, logo_troisfondu);
  if (val == 115) u8g2.drawXBMP(x, y, 32, 32, logo_e2points);
  if (val == 116) u8g2.drawXBMP(x, y, 32, 32, logo_Nchapeau);
  if (val == 117) u8g2.drawXBMP(x, y, 32, 32, logo_3serpent);
  if (val == 118) u8g2.drawXBMP(x, y, 32, 32, logo_pointdinterogation);
  if (val == 119) u8g2.drawXBMP(x, y, 32, 32, logo_paragraphe);
  if (val == 120) u8g2.drawXBMP(x, y, 32, 32, logo_Cdroit);
  if (val == 121) u8g2.drawXBMP(x, y, 32, 32, logo_Cgauche);
  if (val == 122) u8g2.drawXBMP(x, y, 32, 32, logo_fourche);
  if (val == 123) u8g2.drawXBMP(x, y, 32, 32, logo_infogramme);
  if (val == 124) u8g2.drawXBMP(x, y, 32, 32, logo_croixlorraine);
  if (val == 125) u8g2.drawXBMP(x, y, 32, 32, logo_balon);
  if (val == 126) u8g2.drawXBMP(x, y, 32, 32, logo_ytete);
  if (val == 127) u8g2.drawXBMP(x, y, 32, 32, logo_BT);
}

int BP_Appuye() { //fonction qui donne une valeur pour le BP appuyé
    int nombre_appuye = 0;
    kval = 0;
    if (digitalRead(BUTTON1_PIN) == LOW) {
        kval = 1;
        nombre_appuye++;}
    if (digitalRead(BUTTON2_PIN) == LOW) {
        kval = 2;
        nombre_appuye++;}
    if (digitalRead(BUTTON3_PIN) == LOW) {
        kval = 3;
        nombre_appuye++;}
    if (digitalRead(BUTTON4_PIN) == LOW) {
        kval = 4;
        nombre_appuye++;}
    if (nombre_appuye > 1){ //si plusieurs BP sont appuyé, on renvoie 26 (erreur)
        return 5;}
        else if (kval_old == kval) { //si BP identique au précédent resultat, on renvois 0
            return 0;}
            else{kval_old = kval; // sinon on renvoie la valeur du BP appuyé
                return kval;}
}

void get_bouton() {
   int flag = 0;
   Module_fini = 0;
   int BPpush[4] = {0, 0, 0, 0};
   for(int i = 0; i < 4; i++){
      flag = 0;
      while (flag == 0){
         bouton_appuye = BP_Appuye();
         if (bouton_appuye != 0){
            BPpush[i] = bouton_appuye;
            u8g2.firstPage();
            do {
               dessine(symbole[ligne][colonne[0]],  0, 16);
               dessine(symbole[ligne][colonne[1]], 32, 16);
               dessine(symbole[ligne][colonne[2]], 64, 16);
               dessine(symbole[ligne][colonne[3]], 96, 16);
               for (int j = 0; j < 4; j++) {
                  if (BPpush[j] == 1) u8g2.drawTriangle(16+32*0, 63,21+32*0, 53, 11+32*0, 53);
                  if (BPpush[j] == 2) u8g2.drawTriangle(16+32*1, 63,21+32*1, 53, 11+32*1, 53);
                  if (BPpush[j] == 3) u8g2.drawTriangle(16+32*2, 63,21+32*2, 53, 11+32*2, 53);
                  if (BPpush[j] == 4) u8g2.drawTriangle(16+32*3, 63,21+32*3, 53, 11+32*3, 53);
               }
            } while ( u8g2.nextPage() );
            Serial.print("Bouton : ");
            Serial.print(bouton_appuye);
            if (bouton_appuye == ordre_BP[i]){
               flag = 1;
               Serial.println("   Bien appuyé ");
               delay(200);
            }
            if (bouton_appuye != ordre_BP[i]  &&  bouton_appuye != 0){
               Strike = 1;
               stripRGB.setPixelColor(0,   0, 255,   0);
               stripRGB.show();
               Serial.println("   Mal appuyé !!! ");
               while (Strike == 1) {
                 delay(600);
                 Strike = 0;
              }
              return;
           }
         }
      }
   }
   Module_fini = 1;
      Serial.println("Module fini");
}

void onRequest() {
  Wire.write(Strike);
  Wire.write(Module_fini);
  Strike = 0;
}

void onReceive(int len){
  Serial.print("onReceive : ");
  int i = 0;
  while(Wire.available()){
    int c = Wire.read();
    Recep[i] = c;
    Serial.print(c);
    Serial.print(" ");
    i++;
  }
  Serial.println();
  Numero_de_serie = Recep[0];
  Nb_Batteries = Recep[1];
  Port = Recep[2];
  Nb_Erreur = Recep[3];
  Indicateur = Recep[4];
  Val_temps = Recep[5];
  if (Val_temps >= 4) Val_temps_5 = 1;
  else Val_temps_5 = 0;
  if ((Val_temps - 4 * Val_temps_5) >= 2) Val_temps_4 = 1;
  else Val_temps_4 = 0;
  if ((Val_temps - 4 * Val_temps_5 - 2 * Val_temps_4) >= 1) Val_temps_1 = 1;
  else Val_temps_1 = 0;
  if (Val_temps == 9) Demmarage = 1;
}
